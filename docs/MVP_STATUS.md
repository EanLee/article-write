# WriteFlow MVP 功能狀態

> **負責人**: Alex (PM)
> **最後更新**: 2026-02-14
> **目標版本**: v0.1.0（預計 2026-03-15）
> **追蹤標準**: 每個功能必須有明確 Done 定義，不得以「差不多」或「大概」作為完成依據

---

## 📊 整體進度

| 類別 | 完成 | 未完成 | 完成率 |
|------|------|--------|--------|
| 核心功能 | 6 | 2 | 75% |
| 基礎設施 | 4 | 1 | 80% |
| **合計** | **10** | **3** | **77%** |

> ⚠️ **本 Sprint 目標**：補齊剩餘 3 項，達到 Jordan 可安裝使用的狀態

---

## 🔧 核心功能

### F-01 Wiki Link 轉換

| 項目 | 內容 |
|------|------|
| **Done 定義** | `[[文章名稱]]` 和 `[[文章名稱\|顯示文字]]` 均能正確轉換為 Markdown 連結；不存在的連結保留原樣不 crash |
| **當前狀態** | ✅ 完成 |
| **截圖** | — |
| **相關測試** | `tests/services/ArticleService.test.ts` |

---

### F-02 圖片路徑處理

| 項目 | 內容 |
|------|------|
| **Done 定義** | 圖片複製到 `{slug}/images/`（Leaf 結構），content 內路徑更新為 `./images/filename`，原始 `![[pic.png]]` 語法正確轉換 |
| **當前狀態** | ✅ 完成 |
| **截圖** | — |
| **相關測試** | `tests/stores/article.path-handling.test.ts` |

---

### F-03 Frontmatter 轉換

| 項目 | 內容 |
|------|------|
| **Done 定義** | 輸出包含 `title`、`pubDate`（發布時間）、`created`（建立時間）、`slug`、`category`、`tags`；日期格式為 ISO 8601；欄位缺失時自動填入預設值 |
| **當前狀態** | ✅ 完成 |
| **截圖** | — |
| **備注** | `date` → `pubDate` / `created` 欄位遷移已完成（圓桌 #007）|

---

### F-04 全量同步發布

| 項目 | 內容 |
|------|------|
| **Done 定義** | 點擊「同步到 Blog」後，所有 `published` 狀態文章以 Leaf 結構輸出到目標資料夾；圖片一併複製；回傳成功/失敗結果 |
| **當前狀態** | ✅ 完成 |
| **截圖** | — |
| **相關測試** | `tests/services/PublishService.test.ts` |

---

### F-05 發布錯誤反饋 UI

| 項目 | 內容 |
|------|------|
| **Done 定義** | 同步失敗時 UI 顯示「文章《XXX》同步失敗：[原因]」；覆蓋五種常見失敗情境：目標路徑不存在、無寫入權限、磁碟空間不足、檔案被佔用、Markdown 解析失敗；不能只有 `console.error` |
| **當前狀態** | ❌ 未完成 |
| **截圖** | — |
| **Action Item** | [#008] AI-2：Lin 負責，P0 |

---

### F-06 Git 自動化

| 項目 | 內容 |
|------|------|
| **Done 定義** | 同步完成後自動執行 `git add` + `git commit` + `git push`（背景靜默，不阻塞 UI）|
| **當前狀態** | 🔵 v0.2（不在本次 MVP 範圍） |
| **截圖** | — |
| **備注** | 圓桌 #005 決策：MVP 為本地同步，Git push 為 v0.2 |

---

## ⚙️ 基礎設施

### I-01 設定介面（SettingsPanel）

| 項目 | 內容 |
|------|------|
| **Done 定義** | 四個分頁（一般、文章、編輯器、關於）均可操作；Obsidian Vault 路徑與 Astro Blog 路徑可設定並驗證；設定存入後重啟應用仍保留 |
| **當前狀態** | ✅ 完成 |
| **截圖** | — |

---

### I-02 自動儲存（AutoSaveService）

| 項目 | 內容 |
|------|------|
| **Done 定義** | 三層過濾策略運作正常：Dirty Flag 快速路徑 → Timer → 字串比對；False Positive（打了又刪）不觸發儲存且 saveState 正確重置 |
| **當前狀態** | ✅ 完成 |
| **截圖** | — |
| **相關測試** | `tests/services/AutoSaveService.test.ts`（含 False Positive 案例）|

---

### I-03 文章管理介面

| 項目 | 內容 |
|------|------|
| **Done 定義** | 文章列表可正確顯示；可切換 `draft` / `published` 狀態；「同步到 Blog」按鈕可觸發全量同步 |
| **當前狀態** | ✅ 完成 |
| **截圖** | — |

---

### I-04 編輯器（MainEditor）

| 項目 | 內容 |
|------|------|
| **Done 定義** | Markdown 編輯與即時預覽正常；專注模式（隱藏 ActivityBar）可切換；AutoSave 整合正常運作 |
| **當前狀態** | ✅ 完成 |
| **截圖** | — |

---

### I-05 Electron 打包

| 項目 | 內容 |
|------|------|
| **Done 定義** | `electron-builder` 設定完成；可在 Windows 上產出 `.exe`、macOS 上產出 `.app`；Jordan 可直接安裝並執行，無需開發環境 |
| **當前狀態** | ❌ 未完成 |
| **截圖** | — |
| **Action Item** | [#008] AI-3：Lin 負責，P0（依序：先 F-05 → 再 I-05）|

---

## 🧪 驗收條件

### 端對端驗收（Jordan 負責，等打包完成後執行）

| # | 驗收項目 | Done 定義 |
|---|---------|-----------|
| 1 | 安裝與啟動 | 雙擊安裝包完成安裝，應用程式可正常開啟 |
| 2 | 設定路徑 | 在設定介面填入 Obsidian Vault 路徑與 Astro Blog 路徑，重啟後設定保留 |
| 3 | 文章狀態切換 | 將一篇 draft 文章切換為 published，清單狀態即時更新 |
| 4 | 全量同步 | 點擊「同步到 Blog」，目標資料夾出現正確的 Leaf 結構（`{slug}/index.md` + `{slug}/images/`）|
| 5 | 錯誤反饋 | 設定錯誤路徑後觸發同步，UI 顯示具體失敗原因（不是空白或 console.error）|

---

## 📅 本 Sprint 執行序

依照圓桌 #008 決策，執行順序如下：

```
1. F-05 發布錯誤反饋 UI（Lin）
        ↓
2. I-05 Electron 打包（Lin）
        ↓
3. Smoke Test 通過（Taylor 執行 checklist）
        ↓
4. Jordan 端對端驗收
```

> 不加新功能，只做讓 Jordan 真正跑起來所需的最小工作。

---

**文件狀態**: 🔄 活躍追蹤中
