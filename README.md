# WriteFlow

> **è®“å¯«ä½œæ›´æµæš¢** - å°ˆç‚ºå…§å®¹å‰µä½œè€…æ‰“é€ çš„å¯«ä½œèˆ‡ç™¼å¸ƒå·¥å…·

WriteFlow æ˜¯ä¸€å€‹æ¡Œé¢æ‡‰ç”¨ç¨‹å¼ï¼Œå¹«åŠ©å…§å®¹å‰µä½œè€…å¾ Obsidian ç„¡ç¸«ç™¼å¸ƒæ–‡ç« åˆ° Astro éƒ¨è½æ ¼ã€‚ç„¡è«–ä½ æ˜¯æŠ€è¡“éƒ¨è½å®¢ã€ç”Ÿæ´»å‰µä½œè€…é‚„æ˜¯å°ˆæ¥­å¯«æ‰‹ï¼ŒWriteFlow è®“ç™¼å¸ƒè®Šå¾—ç°¡å–®å¿«é€Ÿã€‚

**æ ¸å¿ƒåƒ¹å€¼**ï¼šå¾å¯«ä½œåˆ°ç™¼å¸ƒï¼Œä¸€æ°£å‘µæˆã€‚

## æŠ€è¡“å †ç–Š

| é¡åˆ¥ | æŠ€è¡“ |
|------|------|
| **å‰ç«¯æ¡†æ¶** | Vue 3 (Composition API) |
| **é¡å‹ç³»çµ±** | TypeScript 5.9 |
| **æ¡Œé¢æ¡†æ¶** | Electron 39 |
| **UI æ¡†æ¶** | Tailwind CSS 4 + DaisyUI 5 |
| **ç‹€æ…‹ç®¡ç†** | Pinia 3 |
| **å»ºç½®å·¥å…·** | Vite 7 |
| **æ¸¬è©¦æ¡†æ¶** | Vitest 4 |
| **Markdown** | markdown-it + highlight.js |

## å°ˆæ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ main/                    # Electron ä¸»é€²ç¨‹
â”‚   â”œâ”€â”€ main.ts             # ä¸»é€²ç¨‹å…¥å£
â”‚   â”œâ”€â”€ preload.ts          # é è¼‰è…³æœ¬ (IPC æ©‹æ¥)
â”‚   â””â”€â”€ services/           # ä¸»é€²ç¨‹æœå‹™ï¼ˆMain Processï¼‰
â”‚       â”‚                   # âš ï¸ åƒ…é™ Main Process ä½¿ç”¨ï¼Œå¯å­˜å– Node.js/Electron API
â”‚       â”œâ”€â”€ AIProvider/         # AI ä¾›æ‡‰å•†å¯¦ä½œ (Claude/Gemini/OpenAI)
â”‚       â”œâ”€â”€ AIService.ts        # AI åŠŸèƒ½çµ±ä¸€å…¥å£
â”‚       â”œâ”€â”€ ConfigService.ts    # è¨­å®šæª”è®€å¯«
â”‚       â”œâ”€â”€ FileService.ts      # å®‰å…¨æª”æ¡ˆ I/Oï¼ˆå«è·¯å¾‘ç™½åå–®é©—è­‰ï¼‰
â”‚       â”œâ”€â”€ GitService.ts       # Git æ“ä½œ
â”‚       â”œâ”€â”€ ProcessService.ts   # å­é€²ç¨‹ç®¡ç†ï¼ˆDev Serverï¼‰
â”‚       â”œâ”€â”€ PublishService.ts   # æ–‡ç« ç™¼å¸ƒæµç¨‹
â”‚       â””â”€â”€ SearchService.ts    # å…¨æ–‡æœå°‹ç´¢å¼•
â”‚
â”œâ”€â”€ components/              # Vue UI å…ƒä»¶
â”‚   â”œâ”€â”€ MainEditor.vue          # ä¸»ç·¨è¼¯å™¨ (åˆ†å±é è¦½)
â”‚   â”œâ”€â”€ EditorPane.vue          # ç·¨è¼¯é¢æ¿
â”‚   â”œâ”€â”€ PreviewPane.vue         # é è¦½é¢æ¿
â”‚   â”œâ”€â”€ FrontmatterEditor.vue   # å‰ç½®è³‡æ–™ç·¨è¼¯å™¨
â”‚   â”œâ”€â”€ ImageManager.vue        # åœ–ç‰‡ç®¡ç†å™¨
â”‚   â”œâ”€â”€ ArticleList.vue         # æ–‡ç« åˆ—è¡¨
â”‚   â”œâ”€â”€ ConversionPanel.vue     # æ ¼å¼è½‰æ›é¢æ¿
â”‚   â”œâ”€â”€ SettingsPanel.vue       # è¨­å®šé¢æ¿
â”‚   â””â”€â”€ ServerControlPanel.vue  # ä¼ºæœå™¨æ§åˆ¶é¢æ¿
â”‚
â”œâ”€â”€ composables/             # Vue Composables
â”‚   â”œâ”€â”€ useServices.ts          # æœå‹™å–®ä¾‹ç®¡ç†
â”‚   â”œâ”€â”€ useEditorShortcuts.ts   # ç·¨è¼¯å™¨å¿«æ·éµ
â”‚   â”œâ”€â”€ useAutocomplete.ts      # è‡ªå‹•å®ŒæˆåŠŸèƒ½
â”‚   â””â”€â”€ useEditorValidation.ts  # èªæ³•é©—è­‰
â”‚
â”œâ”€â”€ services/                # æ¸²æŸ“é€²ç¨‹æœå‹™ï¼ˆRenderer Processï¼‰
â”‚   â”‚                        # âš ï¸ åƒ…é™ Renderer ä½¿ç”¨ï¼Œå¯å­˜å– DOM/BOM
â”‚   â”œâ”€â”€ ArticleService.ts       # æ–‡ç«  CRUD èˆ‡ ID ç”Ÿæˆ
â”‚   â”œâ”€â”€ AutoSaveService.ts      # è‡ªå‹•å„²å­˜æ’ç¨‹
â”‚   â”œâ”€â”€ BackupService.ts        # å‚™ä»½ç®¡ç†
â”‚   â”œâ”€â”€ ConverterService.ts     # Obsidian â†’ Astro æ ¼å¼è½‰æ›
â”‚   â”œâ”€â”€ ElectronFileSystem.ts   # IPC æª”æ¡ˆç³»çµ±æ©‹æ¥
â”‚   â”œâ”€â”€ FileScannerService.ts   # ç›®éŒ„æƒæèˆ‡æ–‡ç« ç´¢å¼•
â”‚   â”œâ”€â”€ FileWatchService.ts     # å¤–éƒ¨æª”æ¡ˆè®Šæ›´ç›£è½
â”‚   â”œâ”€â”€ ImageService.ts         # åœ–ç‰‡ç®¡ç†
â”‚   â”œâ”€â”€ MarkdownService.ts      # Markdown è§£æèˆ‡æ¸²æŸ“
â”‚   â”œâ”€â”€ MetadataCacheService.ts # Frontmatter å¿«å–
â”‚   â”œâ”€â”€ NotificationService.ts  # Toast é€šçŸ¥ç³»çµ±
â”‚   â”œâ”€â”€ ObsidianSyntaxService.ts # Obsidian èªæ³•æ”¯æ´
â”‚   â””â”€â”€ PreviewService.ts       # é è¦½æ¸²æŸ“
â”‚
â”‚   > ğŸ“Œ **å…©å€‹ services è³‡æ–™å¤¾èªªæ˜**
â”‚   > `src/services/` â€” Renderer é€²ç¨‹æœå‹™ï¼Œå¯ä½¿ç”¨ Vue/DOM/BOM API
â”‚   > `src/main/services/` â€” Main é€²ç¨‹æœå‹™ï¼Œå¯ä½¿ç”¨ Node.js/Electron API
â”‚   > å…©è€…ä¸å¯äº’ç›¸ç›´æ¥ importï¼Œé ˆé€é `preload.ts` çš„ IPC æ©‹æ¥é€šè¨Š
â”‚
â”œâ”€â”€ stores/                  # Pinia ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ article.ts              # æ–‡ç« ç‹€æ…‹
â”‚   â”œâ”€â”€ config.ts               # é…ç½®ç‹€æ…‹
â”‚   â””â”€â”€ server.ts               # ä¼ºæœå™¨ç‹€æ…‹
â”‚
â”œâ”€â”€ types/                   # TypeScript é¡å‹å®šç¾©
â”‚   â”œâ”€â”€ index.ts                # æ ¸å¿ƒè³‡æ–™çµæ§‹
â”‚   â””â”€â”€ electron.d.ts           # Electron API é¡å‹
â”‚
â”œâ”€â”€ App.vue                  # æ ¹å…ƒä»¶
â”œâ”€â”€ main.ts                  # Vue æ‡‰ç”¨ç¨‹å¼å…¥å£
â””â”€â”€ style.css                # å…¨åŸŸæ¨£å¼
```

## åŠŸèƒ½ç‰¹è‰²

### ç·¨è¼¯åŠŸèƒ½
- åˆ†å±ç·¨è¼¯èˆ‡å³æ™‚é è¦½
- Obsidian èªæ³•æ”¯æ´ (Wiki Linksã€Task Listsã€Callouts)
- å¿«æ·éµæ”¯æ´ (Ctrl+B ç²—é«”ã€Ctrl+I æ–œé«”ã€Ctrl+K é€£çµç­‰)
- è‡ªå‹•é…å°æ‹¬è™Ÿèˆ‡å¼•è™Ÿ
- èªæ³•é©—è­‰èˆ‡éŒ¯èª¤æç¤º
- è‡ªå‹•å®Œæˆ (æ¨™ç±¤ã€é€£çµã€åœ–ç‰‡)

### æ–‡ç« ç®¡ç†
- è‰ç¨¿/å·²ç™¼å¸ƒç‹€æ…‹ç®¡ç†
- åˆ†é¡ç®¡ç† (Software/Growth/Management)
- æ¨™ç±¤ç¯©é¸èˆ‡æœå°‹
- å‰ç½®è³‡æ–™ (Frontmatter) ç·¨è¼¯
- Raw æ¨¡å¼ç·¨è¼¯

### è‡ªå‹•åŒ–åŠŸèƒ½
- è‡ªå‹•å„²å­˜ (å¯è¨­å®šé–“éš”)
- æª”æ¡ˆç›£è½ (åµæ¸¬å¤–éƒ¨ä¿®æ”¹)
- å‚™ä»½èˆ‡è¡çªæª¢æ¸¬
- Obsidian â†’ Astro æ ¼å¼è‡ªå‹•è½‰æ›

### åœ–ç‰‡ç®¡ç†
- æ‹–æ‹½ä¸Šå‚³
- ä½¿ç”¨ç‹€æ…‹è¿½è¹¤
- æ‰¹æ¬¡è¤‡è£½åˆ°ç›®æ¨™éƒ¨è½æ ¼

### é–‹ç™¼ä¼ºæœå™¨
- ä¸€éµå•Ÿå‹• Astro Dev Server
- å³æ™‚æ—¥èªŒé¡¯ç¤º
- é‹è¡Œç‹€æ…‹ç›£æ§

### ç™¼å¸ƒèˆ‡ Git æ“ä½œ
- å–®ç¯‡æ–‡ç« ç™¼å¸ƒåˆ° Astro éƒ¨è½æ ¼
- è‡ªå‹•ç”Ÿæˆæ¨™æº–åŒ– Git æŒ‡ä»¤
- æ”¯æ´ Conventional Commits æ ¼å¼
- ä¸€éµè¤‡è£½ addã€commitã€push æŒ‡ä»¤
- æ“ä½œæŒ‡å¼•èˆ‡æç¤º

**å¿«é€Ÿé–‹å§‹**ï¼š
1. è¨­å®šæ–‡ç« ç›®éŒ„èˆ‡éƒ¨è½æ ¼è·¯å¾‘
2. åœ¨æ–‡ç« ç®¡ç†æˆ–ç·¨è¼¯å™¨é»æ“Šã€Œç™¼å¸ƒã€æŒ‰éˆ•
3. æ–‡ç« è‡ªå‹•è½‰æ›ä¸¦è¤‡è£½åˆ° Astro ç›®éŒ„
4. å½ˆå‡º Git æ“ä½œæŒ‡å—ï¼Œè¤‡è£½æŒ‡ä»¤åŸ·è¡Œ

**æœªä¾†åŠŸèƒ½ (v0.2)**ï¼š
- ä¸€éµè‡ªå‹•åŸ·è¡Œ Git æ“ä½œ
- Git è¡çªè‡ªå‹•è§£æ±º
- é ç«¯æ¨é€ç‹€æ…‹æª¢æŸ¥

## é–‹ç™¼æŒ‡ä»¤

```bash
# å®‰è£ä¾è³´
pnpm install

# é–‹ç™¼æ¨¡å¼
pnpm run dev

# å»ºç½®æ‡‰ç”¨ç¨‹å¼
pnpm run build

# åŸ·è¡Œæ¸¬è©¦
pnpm run test

# ç›£æ§æ¸¬è©¦
pnpm run test:watch

# Lint æª¢æŸ¥
pnpm run lint

# Lint è‡ªå‹•ä¿®å¾©
pnpm run lint:fix
```

## æ¶æ§‹è¨­è¨ˆ

### åˆ†å±¤æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      UI å±¤ (Vue Components)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Composables (å¯é‡ç”¨é‚è¼¯)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 ç‹€æ…‹ç®¡ç†å±¤ (Pinia Stores)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  æ¥­å‹™é‚è¼¯å±¤ (Services)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              IPC é€šè¨Šå±¤ (preload.ts)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               Electron ä¸»é€²ç¨‹ (main/)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### IPC é€šè¨Š

æ¸²æŸ“é€²ç¨‹é€é `window.electronAPI` èˆ‡ä¸»é€²ç¨‹é€šè¨Šï¼š

| é¡åˆ¥ | é€šé“ |
|------|------|
| æª”æ¡ˆæ“ä½œ | `read-file`, `write-file`, `delete-file`, `copy-file` |
| ç›®éŒ„æ“ä½œ | `read-directory`, `create-directory`, `get-file-stats` |
| æª”æ¡ˆç›£è½ | `start-file-watching`, `stop-file-watching`, `file-change` |
| é…ç½®æ“ä½œ | `get-config`, `set-config`, `validate-obsidian-vault` |
| é€²ç¨‹ç®¡ç† | `start-dev-server`, `stop-dev-server`, `get-server-status` |

## è¨­å®šéœ€æ±‚

### Obsidian Vault çµæ§‹

```
your-vault/
â”œâ”€â”€ Drafts/              # è‰ç¨¿æ–‡ç« 
â”‚   â”œâ”€â”€ Software/
â”‚   â”œâ”€â”€ growth/
â”‚   â””â”€â”€ management/
â”œâ”€â”€ Publish/             # å·²ç™¼å¸ƒæ–‡ç« 
â”‚   â”œâ”€â”€ Software/
â”‚   â”œâ”€â”€ growth/
â”‚   â””â”€â”€ management/
â””â”€â”€ images/              # åœ–ç‰‡è³‡æº
```

### Astro éƒ¨è½æ ¼çµæ§‹

```
your-blog/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ content/
â”‚       â””â”€â”€ blog/        # æ–‡ç« è¼¸å‡ºç›®éŒ„
â”œâ”€â”€ public/
â”‚   â””â”€â”€ images/          # åœ–ç‰‡è¼¸å‡ºç›®éŒ„
â””â”€â”€ package.json
```

## å¿«æ·éµ

| å¿«æ·éµ | åŠŸèƒ½ |
|--------|------|
| `Ctrl+S` | å„²å­˜ |
| `Ctrl+Shift+P` | ç™¼å¸ƒæ–‡ç«  |
| `Ctrl+B` | ç²—é«” |
| `Ctrl+I` | æ–œé«” |
| `Ctrl+K` | æ’å…¥é€£çµ |
| `Ctrl+E` | é«˜äº®æ–‡å­— |
| `Ctrl+/` | åˆ‡æ›é è¦½ |

## å¸¸è¦‹å•é¡Œ

### Electron å®‰è£å•é¡Œ

å¦‚æœé‡åˆ° `Electron failed to install correctly` éŒ¯èª¤ï¼š

```bash
# æ‰‹å‹•åŸ·è¡Œ Electron å®‰è£è…³æœ¬
node node_modules/.pnpm/electron@39.2.7/node_modules/electron/install.js
```

### Port å ç”¨å•é¡Œ

é–‹ç™¼æ¨¡å¼é è¨­ä½¿ç”¨ port 3002ã€‚å¦‚æœè¢«å ç”¨ï¼ŒVite æœƒè‡ªå‹•åˆ‡æ›åˆ°å…¶ä»– portï¼Œè«‹ç¢ºä¿ Electron ä¸»é€²ç¨‹ä½¿ç”¨ç›¸åŒçš„ portã€‚

## æˆæ¬Š

MIT License
