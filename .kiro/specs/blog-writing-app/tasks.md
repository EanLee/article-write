# 實作計畫

- [x] 1. 建立專案結構和核心介面
  - 建立 Electron + Vue3 + TypeScript 專案結構
  - 設定 DaisyUI 框架和 Tailwind CSS
  - 建立主要目錄結構：components、services、stores、types
  - 設定 Pinia 狀態管理
  - _需求: 11.1, 11.3_

- [x] 2. 實作設定管理系統
  - [x] 2.1 建立設定資料模型和介面
    - 定義 ConfigStore 和設定資料結構
    - 實作設定檔案的讀取和儲存邏輯
    - _需求: 11.1, 11.2_

  - [ ] 2.2 實作路徑驗證功能
    - 驗證 Obsidian Vault 結構（Publish/Drafts/Images）
    - 驗證 Astro 部落格專案結構（src/content/blog）
    - 驗證 Node.js 專案有效性
    - _需求: 11.2, 11.3_

  - [x] 2.4 實作目錄選擇器功能

    - 整合 Electron 的 dialog API
    - 實作路徑選擇和驗證流程
    - _需求: 11.1, 11.4_

  - [x] 2.3 建立設定介面元件
    - 建立首次設定精靈
    - 實作路徑選擇器和驗證回饋
    - _需求: 11.1, 11.4_

- [x] 3. 實作檔案系統管理




  - [x] 3.1 建立檔案掃描服務


    - 實作 markdown 檔案掃描和解析
    - 建立檔案監控機制（chokidar）
    - _需求: 12.1, 12.4_

  - [x] 3.2 實作前置資料解析器


    - 解析 YAML frontmatter
    - 處理無效格式的錯誤處理
    - _需求: 12.3, 12.5_

  - [x] 3.4 整合檔案系統與 Store


    - 連接 FileService 與 ArticleStore
    - 實作實際的檔案讀寫操作
    - 實作文章持久化功能
    - _需求: 1.2, 1.4, 1.5, 12.1_

  - [x] 3.3 建立文章資料模型
    - 定義 Article 介面和相關類型
    - 實作文章狀態管理（draft/published）
    - _需求: 1.1, 1.3_

- [x] 4. 實作文章管理功能
  - [x] 4.1 建立文章清單元件
    - 顯示按分類組織的文章清單
    - 實作篩選和搜尋功能
    - _需求: 1.1, 12.2_

  - [x] 4.2 實作文章 CRUD 操作
    - 建立新文章功能
    - 文章刪除和狀態變更
    - 檔案移動（draft ↔ published）
    - _需求: 1.2, 1.4, 1.5_

  - [x] 4.3 實作前置資料編輯器
    - 結構化表單編輯 frontmatter
    - 自動 slug 生成和唯一性檢查
    - 自動 lastmod 更新
    - _需求: 2.1, 2.2, 2.4, 2.5, 2.6_

- [x] 5. 實作 Markdown 編輯器
  - [x] 5.1 整合 Markdown 編輯元件
    - 設定 markdown-it 和語法高亮
    - 實作即時預覽功能
    - _需求: 3.1, 7.1_

  - [ ] 5.2 實作 Obsidian 語法支援
    - Wiki 連結自動完成
    - 圖片引用自動完成
    - 語法驗證和錯誤提示
    - _需求: 7.2, 7.3, 7.5_

  - [ ] 5.3 建立預覽引擎
    - 渲染 Obsidian 格式內容
    - 顯示轉換後的外觀
    - 處理圖片和連結預覽
    - _需求: 3.2, 3.3, 3.4, 3.5_

  - [ ] 5.4 增強 Markdown 編輯器
    - 改善目前的基本預覽功能
    - 整合 markdown-it 插件
    - 實作語法高亮和自動完成
    - _需求: 3.1, 7.1_

- [ ] 6. 整合轉換工具
  - [ ] 6.1 整合現有的 Obsidian 轉換器
    - 參考 GitLab repo 的轉換邏輯
    - 建立轉換服務包裝器
    - _需求: 4.1_

  - [ ] 6.2 實作格式轉換功能
    - Wiki 連結轉換為標準 markdown
    - 圖片路徑重寫和 Leaf Bundle 結構
    - 高亮語法轉換
    - _需求: 4.2, 4.3, 4.4_

  - [ ] 6.3 實作圖片複製邏輯
    - 從 Images 資料夾複製到文章目錄
    - 建立正確的相對路徑
    - _需求: 4.5_

- [x] 7. 實作開發伺服器管理
  - [x] 7.1 建立程序管理服務
    - 實作 npm run dev 命令執行
    - 程序狀態監控和日誌捕獲
    - _需求: 5.1, 5.2_

  - [ ] 7.2 建立伺服器控制介面
    - 啟動/停止按鈕和狀態顯示
    - 終端輸出顯示
    - 錯誤處理和重試機制
    - _需求: 5.3, 5.4_

  - [ ] 7.4 整合伺服器管理到主介面
    - 在主應用程式中加入伺服器控制
    - 顯示伺服器狀態和日誌
    - _需求: 5.1, 5.2, 5.3_

  - [x] 7.3 實作程序生命週期管理
    - 應用程式關閉時自動停止伺服器
    - 程序清理和資源釋放
    - _需求: 5.5_

- [ ] 8. 實作圖片管理功能
  - [ ] 8.1 建立圖片管理器元件
    - 顯示文章中引用的圖片清單
    - 圖片瀏覽器和選擇器
    - _需求: 9.1, 9.2_

  - [ ] 8.2 實作圖片驗證和警告
    - 檢查圖片檔案存在性
    - 在編輯器中標示無效引用
    - _需求: 9.3_

  - [ ] 8.3 實作圖片上傳和管理
    - 新圖片上傳到 Images 資料夾
    - 未使用圖片的清理功能
    - _需求: 9.4, 9.5_

- [ ] 9. 實作自動儲存系統
  - [ ] 9.1 建立自動儲存服務
    - 30 秒間隔自動儲存
    - 文章切換時自動儲存
    - _需求: 10.1, 10.2_

  - [ ] 9.2 實作儲存狀態指示器
    - 顯示儲存狀態和修改指示器
    - 未儲存變更的確認提示
    - _需求: 10.3, 10.4, 10.5_

- [ ] 13. 檢查點 - 核心功能驗證
  - 確保檔案系統整合正常運作
  - 驗證文章建立、編輯、儲存流程
  - 測試設定管理功能

- [ ] 10. 實作錯誤處理和備份
  - [ ] 10.1 建立檔案備份機制
    - 儲存前建立備份副本
    - 衝突偵測和警告
    - _需求: 6.1, 6.3_

  - [ ] 10.2 實作錯誤處理系統
    - 檔案操作錯誤處理
    - 進度指示器和使用者回饋
    - 當機復原機制
    - _需求: 6.2, 6.4, 6.5_

- [ ] 11. 整合測試和最佳化
  - [ ] 11.1 建立主要使用者流程測試
    - 文章建立到發布的完整流程
    - 轉換和預覽功能測試
    - _需求: 1.2, 1.4, 4.1_

  - [ ] 11.2 效能最佳化
    - 大量檔案處理最佳化
    - 記憶體使用最佳化
    - _需求: 6.5_

- [ ] 14. 最終檢查點 - 確保所有測試通過
  - 確保所有測試通過，如有問題請詢問使用者
